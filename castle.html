<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–æ–ø 5 –∑–∞–º–∫—ñ–≤ —Å–≤—ñ—Ç—É</title>
    <style>
        body {
            background-color: #f8f4e9; /* –î—É–∂–µ —Å–≤—ñ—Ç–ª–∏–π, —Ç–µ–ø–ª–∏–π –±–µ–∂–µ–≤–∏–π —Ñ–æ–Ω */
            font-family: 'Georgia', 'Times New Roman', Times, serif; /* –ë—ñ–ª—å—à –∫–ª–∞—Å–∏—á–Ω–∏–π —à—Ä–∏—Ñ—Ç */
            margin: 0;
            padding: 40px 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            animation: fadeInDown 1.2s ease-out;
        }

        h1 {
            color: #ffb6c1; /* –ù—ñ–∂–Ω–æ-—Ä–æ–∂–µ–≤–∏–π –∫–æ–ª—ñ—Ä */
            font-size: 2.8em;
            font-weight: normal;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.05);
            font-family: 'Playfair Display', serif; /* A more elegant and classic font */
        }

        /* Google Fonts Import */
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&display=swap');


        .slideshow-wrapper {
            max-width: 960px;
            margin: auto;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .slideshow-container {
            max-width: 800px;
            width: 100%;
            position: relative;
            border-radius: 10px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
            overflow: hidden;
            /* Height will be managed by JS, but give it a starting point */
            height: 500px; /* Default height, will be adjusted by JS */
            transition: height 0.5s ease-in-out;
        }

        .mySlides {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 1s ease-in-out; /* Fade transition */
            background-color: #f8f4e9;
            visibility: hidden; /* Hidden from screen readers and interaction when not active */
            z-index: 0; /* Ensures non-active slides are behind */
            display: flex; /* For centering content within the slide */
            align-items: center;
            justify-content: center;
        }

        .mySlides.active-slide {
            opacity: 1;
            visibility: visible;
            z-index: 1; /* Bring active slide to front */
        }

        .mySlides img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            vertical-align: middle;
            animation: kenBurns 25s infinite alternate;
        }

        /* --- –°–¢–ò–õ–Ü –î–õ–Ø –ü–ï–†–ï–í–ï–†–¢–ê–ù–ù–Ø –ö–ê–†–¢–ö–ò --- */
        .flip-card {
            background-color: transparent;
            width: 100%;
            height: 100%;
            perspective: 1200px;
            cursor: pointer;
        }

        .flip-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.9s;
            transform-style: preserve-3d;
        }

        .flip-card-inner.is-flipped {
            transform: rotateY(180deg);
        }

        .flip-card-front, .flip-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            border-radius: 10px;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .flip-card-back {
            transform: rotateY(180deg);
            background-color: #f8f4e9;
        }

        .flip-card img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            animation: none; /* Disable Ken Burns for flip card images */
        }
        /* --- –ö–Ü–ù–ï–¶–¨ –°–¢–ò–õ–Ü–í –î–õ–Ø –ü–ï–†–ï–í–ï–†–¢–ê–ù–ù–Ø --- */

        #description-container {
            max-width: 800px;
            margin: 25px auto 0 auto;
            padding: 25px 30px;
            background-color: rgba(255, 255, 255, 0.7);
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            backdrop-filter: blur(5px);
            animation: slideUp 1s ease-out;
        }

        #description-container h3 {
            color: #6a6356;
            margin-top: 0;
            font-size: 1.5em;
            font-weight: normal;
        }

        #description-container p {
            color: #5c5549;
            font-size: 1.05em;
            line-height: 1.7;
        }

        /* --- KEYFRAME ANIMATIONS --- */
        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes kenBurns {
            0% { transform: scale(1) translate(0, 0); }
            100% { transform: scale(1.15) translate(2%, -2%); }
        }
        /* --- END KEYFRAME ANIMATIONS --- */


        .prev, .next {
            cursor: pointer;
            color: #a39b8b;
            font-weight: bold;
            font-size: 28px;
            transition: 0.4s ease;
            user-select: none;
            padding: 10px;
            text-shadow: 1px 1px 3px rgba(255, 255, 255, 0.5);
        }
        .prev { margin-right: 15px; }
        .next { margin-left: 15px; }

        .prev:hover, .next:hover {
            color: #7d7463;
        }

        .dots-container {
            text-align: center;
            padding-top: 20px;
        }

        .dot {
            cursor: pointer;
            height: 12px;
            width: 12px;
            margin: 0 4px;
            background-color: #ccc5b9;
            border-radius: 50%;
            display: inline-block;
            transition: background-color 0.6s ease;
        }

        .active, .dot:hover {
            background-color: #a39b8b;
        }

        .footer-nav {
            text-align: center;
            margin-top: 30px;
            padding-bottom: 15px;
        }
        .main-button {
            background-color: #b9b0a1;
            border: none;
            color: white;
            padding: 12px 28px;
            text-decoration: none;
            font-size: 14px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.3s;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.08);
        }

        .main-button:hover {
            background-color: #a39b8b;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body>

    <div class="header">
        <h1>–¢–æ–ø 5 –∑–∞–º–∫—ñ–≤ —Å–≤—ñ—Ç—É</h1>
    </div>

    <div class="slideshow-wrapper">
        <a class="prev" onclick="plusSlides(-1)">&#10094;</a>

        <div class="slideshow-container">
            <div class="mySlides">
                <img src="https://turpoisk.ua/images/blog/zamok-nosh/zamok112.jpg" alt="–ó–∞–º–æ–∫ –ù–æ–π—à–≤–∞–Ω—à—Ç–∞–π–Ω">
            </div>
            <div class="mySlides">
                <img src="https://wallpaper.forfun.com/fetch/aa/aa8e70e865a1bbec7de8ef566a376a45.jpeg" alt="–ó–∞–º–æ–∫ –ú–æ–Ω-–°–µ–Ω-–ú—ñ—à–µ–ª—å">
            </div>
            <div class="mySlides">
                <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRpxbwKhmFjstWqO3puL8pibIg4tOxyMAzm9Q&s" alt="–ó–∞–º–æ–∫ –•—ñ–º–µ–¥–∑—ñ">
            </div>
            <div class="mySlides">
                <img src="https://img.wallpapic.com.ua/i1855-047-521/medium/karliv-mist-praga-zamok-cheska-respublika-shpalery.jpg" alt="–ü—Ä–∞–∑—å–∫–∏–π –≥—Ä–∞–¥">
            </div>

            <div class="mySlides">
                <div class="flip-card" id="chambord-card">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <img src="images/castle1.jpg" alt="–ó–∞–º–æ–∫ –®–∞–º–±–æ—Ä - –í–∏–¥ 1">
                        </div>
                        <div class="flip-card-back">
                            <img src="images/castle2.jpg" alt="–ó–∞–º–æ–∫ –®–∞–º–±–æ—Ä - –í–∏–¥ 2">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <a class="next" onclick="plusSlides(1)">&#10095;</a>
    </div>

    <div class="dots-container">
        <span class="dot" onclick="currentSlide(1)"></span>
        <span class="dot" onclick="currentSlide(2)"></span>
        <span class="dot" onclick="currentSlide(3)"></span>
        <span class="dot" onclick="currentSlide(4)"></span>
        <span class="dot" onclick="currentSlide(5)"></span>
    </div>

    <div id="description-container"></div>

    <div class="footer-nav">
        <a href="news.html" class="main-button">–î–æ –Ω–æ–≤–∏–Ω üì∞</a>
    </div>

    <script>
        const descriptions = [
            {
                title: "–ó–∞–º–æ–∫ –ù–æ–π—à–≤–∞–Ω—à—Ç–∞–π–Ω, –ù—ñ–º–µ—á—á–∏–Ω–∞",
                text: "–°–ø—Ä–∞–≤–∂–Ω—ñ–π –∫–∞–∑–∫–æ–≤–∏–π –∑–∞–º–æ–∫, –∑–±—É–¥–æ–≤–∞–Ω–∏–π –∑–∞ –Ω–∞–∫–∞–∑–æ–º –±–∞–≤–∞—Ä—Å—å–∫–æ–≥–æ –∫–æ—Ä–æ–ª—è –õ—é–¥–≤—ñ–≥–∞ II —É XIX —Å—Ç–æ–ª—ñ—Ç—Ç—ñ. –í—ñ–Ω —Å—Ç–∞–≤ –¥–∂–µ—Ä–µ–ª–æ–º –Ω–∞—Ç—Ö–Ω–µ–Ω–Ω—è –¥–ª—è –í–æ–ª—Ç–∞ –î—ñ—Å–Ω–µ—è –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ –∑–∞–º–∫—É –°–ø–ª—è—á–æ—ó –∫—Ä–∞—Å—É–Ω—ñ –≤ –î—ñ—Å–Ω–µ–π–ª–µ–Ω–¥—ñ. –†–æ–∑—Ç–∞—à–æ–≤–∞–Ω–∏–π –Ω–∞ —Å–∫–µ–ª—ñ —Å–µ—Ä–µ–¥ –∞–ª—å–ø—ñ–π—Å—å–∫–∏—Ö –ª—ñ—Å—ñ–≤, –ù–æ–π—à–≤–∞–Ω—à—Ç–∞–π–Ω —î –≤—Ç—ñ–ª–µ–Ω–Ω—è–º —Ä–æ–º–∞–Ω—Ç–∏—á–Ω–∏—Ö —ñ–¥–µ–∞–ª—ñ–≤ —Ç–∞ –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è —Å–µ—Ä–µ–¥–Ω—å–æ–≤—ñ—á–Ω–æ—é –∫—É–ª—å—Ç—É—Ä–æ—é. –Ü–Ω—Ç–µ—Ä'—î—Ä–∏ –∑–∞–º–∫—É –ø—Ä–∏–∫—Ä–∞—à–µ–Ω—ñ —Å—Ü–µ–Ω–∞–º–∏ –∑ –æ–ø–µ—Ä –†—ñ—Ö–∞—Ä–¥–∞ –í–∞–≥–Ω–µ—Ä–∞.",
                aspectRatio: 1.5 // 1280 / 853 ‚âà 1.5
            },
            {
                title: "–ú–æ–Ω-–°–µ–Ω-–ú—ñ—à–µ–ª—å, –§—Ä–∞–Ω—Ü—ñ—è",
                text: "–¶–µ —É–Ω—ñ–∫–∞–ª—å–Ω–µ –∞–±–∞—Ç—Å—Ç–≤–æ-—Ñ–æ—Ä—Ç–µ—Ü—è, —Ä–æ–∑—Ç–∞—à–æ–≤–∞–Ω–µ –Ω–∞ —Å–∫–µ–ª—è—Å—Ç–æ–º—É –æ—Å—Ç—Ä–æ–≤—ñ –±—ñ–ª—è —É–∑–±–µ—Ä–µ–∂–∂—è –ù–æ—Ä–º–∞–Ω–¥—ñ—ó. –ü—ñ–¥ —á–∞—Å –Ω–∞–π–≤–∏—â–∏—Ö –ø—Ä–∏–ø–ª–∏–≤—ñ–≤ —É –Ñ–≤—Ä–æ–ø—ñ –æ—Å—Ç—Ä—ñ–≤ –ø–æ–≤–Ω—ñ—Å—Ç—é –≤—ñ–¥—Ä—ñ–∑–∞—î—Ç—å—Å—è –≤—ñ–¥ –º–∞—Ç–µ—Ä–∏–∫–∞, –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—é—á–∏—Å—å –Ω–∞ –Ω–µ–ø—Ä–∏—Å—Ç—É–ø–Ω—É —Ü–∏—Ç–∞–¥–µ–ª—å. –ô–æ–≥–æ —ñ—Å—Ç–æ—Ä—ñ—è —Å—è–≥–∞—î VIII —Å—Ç–æ–ª—ñ—Ç—Ç—è, –∞ –≥–æ—Ç–∏—á–Ω–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –∞–±–∞—Ç—Å—Ç–≤–∞, —â–æ –Ω—ñ–±–∏ –∑–¥—ñ–π–º–∞—î—Ç—å—Å—è –¥–æ –Ω–µ–±–µ—Å, —î –æ–¥–Ω–∏–º –∑ –Ω–∞–π–≤–∏–¥–∞—Ç–Ω—ñ—à–∏—Ö –¥–æ—Å—è–≥–Ω–µ–Ω—å —Å–µ—Ä–µ–¥–Ω—å–æ–≤—ñ—á–Ω–æ–≥–æ –±—É–¥—ñ–≤–Ω–∏—Ü—Ç–≤–∞ —Ç–∞ –æ–±'—î–∫—Ç–æ–º –°–≤—ñ—Ç–æ–≤–æ—ó —Å–ø–∞–¥—â–∏–Ω–∏ –Æ–ù–ï–°–ö–û.",
                aspectRatio: 1.5 // 1280 / 853 ‚âà 1.5
            },
            {
                title: "–ó–∞–º–æ–∫ –•—ñ–º–µ–¥–∑—ñ, –Ø–ø–æ–Ω—ñ—è",
                text: "–¢–∞–∫–æ–∂ –≤—ñ–¥–æ–º–∏–π —è–∫ ¬´–ó–∞–º–æ–∫ –±—ñ–ª–æ—ó —á–∞–ø–ª—ñ¬ª —á–µ—Ä–µ–∑ —Å–≤–æ—é —Å–ª—ñ–ø—É—á–æ-–±—ñ–ª—É –∑–æ–≤–Ω—ñ—à–Ω—ñ—Å—Ç—å —Ç–∞ –≤–∏—Ç–æ–Ω—á–µ–Ω—ñ —Ñ–æ—Ä–º–∏, —â–æ –Ω–∞–≥–∞–¥—É—é—Ç—å –ø—Ç–∞—Ö–∞ –≤ –ø–æ–ª—å–æ—Ç—ñ. –¶–µ –æ–¥–∏–Ω –∑ –Ω–∞–π—Å—Ç–∞—Ä—ñ—à–∏—Ö —ñ –Ω–∞–π–∫—Ä–∞—â–µ –∑–±–µ—Ä–µ–∂–µ–Ω–∏—Ö –∑–∞–º–∫—ñ–≤ –Ø–ø–æ–Ω—ñ—ó, —è–∫–∏–π –Ω—ñ–∫–æ–ª–∏ –Ω–µ —Ä—É–π–Ω—É–≤–∞–≤—Å—è –≤—ñ–π–Ω–∞–º–∏ —á–∏ —Å—Ç–∏—Ö—ñ–π–Ω–∏–º–∏ –ª–∏—Ö–∞–º–∏. –ô–æ–≥–æ —Å–∫–ª–∞–¥–Ω–∏–π –∫–æ–º–ø–ª–µ–∫—Å –∑ 83 –±—É–¥—ñ–≤–µ–ª—å, —â–æ –≤–∫–ª—é—á–∞—î –ª–∞–±—ñ—Ä–∏–Ω—Ç–∏ —Å—Ç–µ–∂–æ–∫ —Ç–∞ –æ–±–æ—Ä–æ–Ω–Ω—ñ —Å–ø–æ—Ä—É–¥–∏, —î –±–ª–∏—Å–∫—É—á–∏–º –∑—Ä–∞–∑–∫–æ–º —è–ø–æ–Ω—Å—å–∫–æ—ó –∑–∞–º–∫–æ–≤–æ—ó –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏ –ø–æ—á–∞—Ç–∫—É XVII —Å—Ç–æ–ª—ñ—Ç—Ç—è.",
                aspectRatio: 1.5 // 1280 / 853 ‚âà 1.5
            },
            {
                title: "–ü—Ä–∞–∑—å–∫–∏–π –≥—Ä–∞–¥, –ß–µ—Ö—ñ—è",
                text: "–ó–∞–Ω–µ—Å–µ–Ω–∏–π –¥–æ –ö–Ω–∏–≥–∏ —Ä–µ–∫–æ—Ä–¥—ñ–≤ –ì—ñ–Ω–Ω–µ—Å–∞ —è–∫ –Ω–∞–π–±—ñ–ª—å—à–∏–π –∑–∞–º–∫–æ–≤–∏–π –∫–æ–º–ø–ª–µ–∫—Å —É —Å–≤—ñ—Ç—ñ, –ü—Ä–∞–∑—å–∫–∏–π –≥—Ä–∞–¥ —î —Å–ø—Ä–∞–≤–∂–Ω—ñ–º –º—ñ—Å—Ç–æ–º —É –º—ñ—Å—Ç—ñ. –ô–æ–≥–æ —ñ—Å—Ç–æ—Ä—ñ—è –Ω–∞–ª—ñ—á—É—î –ø–æ–Ω–∞–¥ —Ç–∏—Å—è—á—É —Ä–æ–∫—ñ–≤, –ø—Ä–æ—Ç—è–≥–æ–º —è–∫–∏—Ö –≤—ñ–Ω –±—É–≤ —Ä–µ–∑–∏–¥–µ–Ω—Ü—ñ—î—é –∫–æ—Ä–æ–ª—ñ–≤ –ë–æ–≥–µ–º—ñ—ó, —ñ–º–ø–µ—Ä–∞—Ç–æ—Ä—ñ–≤ –°–≤—è—â–µ–Ω–Ω–æ—ó –†–∏–º—Å—å–∫–æ—ó —ñ–º–ø–µ—Ä—ñ—ó, –∞ —Å—å–æ–≥–æ–¥–Ω—ñ ‚Äî –ø—Ä–µ–∑–∏–¥–µ–Ω—Ç–∞ –ß–µ—Ö—ñ—ó. –ù–∞ –π–æ–≥–æ —Ç–µ—Ä–∏—Ç–æ—Ä—ñ—ó —Ä–æ–∑—Ç–∞—à–æ–≤–∞–Ω—ñ –ø–∞–ª–∞—Ü–∏, —Ö—Ä–∞–º–∏, —Å–∞–¥–∏ —Ç–∞ –≤–∏–∑–Ω–∞—á–Ω—ñ –ø–∞–º'—è—Ç–∫–∏, —Å–µ—Ä–µ–¥ —è–∫–∏—Ö –≤–µ–ª–∏—á–Ω–∏–π –°–æ–±–æ—Ä –°–≤—è—Ç–æ–≥–æ –í—ñ—Ç–∞.",
                aspectRatio: 1.5 // 1280 / 853 ‚âà 1.5
            },
            {
                title: "–ó–∞–º–æ–∫ –õ–µ—Ä–∏",
                text: "–®–µ–¥–µ–≤—Ä –µ–ø–æ—Ö–∏ –†–µ–Ω–µ—Å–∞–Ω—Å—É –≤ –¥–æ–ª–∏–Ω—ñ –û–±–æ–ª–æ–Ω—å, –≤—Ä–∞–∂–∞—î —Å–≤–æ—î—é —É–Ω—ñ–∫–∞–ª—å–Ω–æ—é –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–æ—é, –≤ —è–∫—ñ–π —è–∫ –≤–≤–∞–∂–∞—î—Ç—å—Å—è, –±—Ä–∞–≤ —É—á–∞—Å—Ç—å —Å–∞–º –õ–µ–æ–Ω–∞—Ä–¥–æ –¥–∞ –í—ñ–Ω—á—ñ. –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∏–º –µ–ª–µ–º–µ–Ω—Ç–æ–º —î –±–∞—à–Ω—è, –¥–µ –∂–∏–≤–µ –ø—Ä–∏–Ω—Ü–µ—Å–∞ üë∏ –Ø —Ç–æ—á–Ω–æ –∑–Ω–∞—é —â–æ –í–û–ù–ê - –ß–£–î–û! ü´∂",
                aspectRatio: 1.5
            }
        ];

        let slideIndex = 1;
        let slides = document.getElementsByClassName("mySlides");
        const slideshowContainer = document.querySelector(".slideshow-container");

        function getImageAspectRatio(imgElement, callback) {
            const tempImg = new Image();
            tempImg.src = imgElement.src;

            if (tempImg.complete) { // Check if image is already loaded
                callback(tempImg.naturalWidth / tempImg.naturalHeight);
            } else {
                tempImg.onload = () => {
                    callback(tempImg.naturalWidth / tempImg.naturalHeight);
                };
                tempImg.onerror = () => {
                    console.error("–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è:", imgElement.src);
                    callback(null);
                };
            }
        }

        function updateContainerHeight(index) {
            const currentSlideElement = slides[index - 1];
            let imgElement;

            if (currentSlideElement.querySelector('.flip-card')) {
                const flipCardInner = currentSlideElement.querySelector('.flip-card-inner');
                if (flipCardInner.classList.contains('is-flipped')) {
                    imgElement = flipCardInner.querySelector('.flip-card-back img');
                } else {
                    imgElement = flipCardInner.querySelector('.flip-card-front img');
                }
            } else {
                imgElement = currentSlideElement.querySelector('img');
            }

            if (imgElement) {
                getImageAspectRatio(imgElement, (aspect) => {
                    if (aspect) {
                        const containerWidth = slideshowContainer.offsetWidth;
                        const calculatedHeight = Math.min((containerWidth / aspect), window.innerHeight * 0.8);
                        slideshowContainer.style.height = calculatedHeight + 'px';
                    } else {
                        const predefinedAspect = descriptions[index - 1].aspectRatio;
                        if (predefinedAspect) {
                            const containerWidth = slideshowContainer.offsetWidth;
                            const calculatedHeight = Math.min((containerWidth / predefinedAspect), window.innerHeight * 0.8);
                            slideshowContainer.style.height = calculatedHeight + 'px';
                        } else {
                            slideshowContainer.style.height = '500px';
                        }
                    }
                });
            } else {
                const predefinedAspect = descriptions[index - 1].aspectRatio;
                if (predefinedAspect) {
                    const containerWidth = slideshowContainer.offsetWidth;
                    const calculatedHeight = Math.min((containerWidth / predefinedAspect), window.innerHeight * 0.8);
                    slideshowContainer.style.height = calculatedHeight + 'px';
                } else {
                    slideshowContainer.style.height = '500px';
                }
            }
        }

        // Functions to change slides
        function plusSlides(n) {
            showSlides(slideIndex += n);
        }

        function currentSlide(n) {
            showSlides(slideIndex = n);
        }

        function showSlides(n) {
            let i;
            let dots = document.getElementsByClassName("dot");
            let descriptionContainer = document.getElementById("description-container");

            // Handle wrapping around slides
            if (n > slides.length) { slideIndex = 1; }
            if (n < 1) { slideIndex = slides.length; }

            // Get the currently active slide (if any)
            const currentActiveSlide = document.querySelector('.mySlides.active-slide');

            // Deactivate all slides and dots first
            for (i = 0; i < slides.length; i++) {
                slides[i].classList.remove('active-slide');
                slides[i].style.zIndex = 0; // Ensure they are behind
                // We'll hide them later, after the new slide becomes visible
                dots[i].className = dots[i].className.replace(" active", "");
            }

            // Activate the new slide
            const newActiveSlide = slides[slideIndex - 1];
            newActiveSlide.style.visibility = 'visible'; // Make visible immediately for transition
            newActiveSlide.style.zIndex = 1; // Bring to front
            newActiveSlide.classList.add('active-slide');

            // Hide the old slide after a short delay (matching transition duration)
            if (currentActiveSlide && currentActiveSlide !== newActiveSlide) {
                // Ensure the old slide fades out before becoming truly hidden
                setTimeout(() => {
                    currentActiveSlide.style.visibility = 'hidden';
                }, 1000); // Matches the 1s opacity transition
            }


            // Update description
            let currentDescription = descriptions[slideIndex - 1];
            descriptionContainer.innerHTML = `<h3>${currentDescription.title}</h3><p>${currentDescription.text}</p>`;

            // Re-apply slideUp animation for description container
            descriptionContainer.style.animation = 'none'; // Reset animation
            void descriptionContainer.offsetWidth; // Trigger reflow (important for re-applying animation)
            descriptionContainer.style.animation = 'slideUp 1s ease-out'; // Apply animation

            // Activate the current dot
            dots[slideIndex - 1].className += " active";

            // Update container height
            updateContainerHeight(slideIndex);
        }

        // --- Event Listeners ---
        // Initial call to show the first slide
        showSlides(slideIndex);

        document.addEventListener('keydown', function(event) {
            if (event.key === 'ArrowLeft') {
                plusSlides(-1);
            } else if (event.key === 'ArrowRight') {
                plusSlides(1);
            }
        });

        const chambordCard = document.getElementById('chambord-card');
        if (chambordCard) {
            chambordCard.addEventListener('click', function() {
                this.querySelector('.flip-card-inner').classList.toggle('is-flipped');
                // Re-calculate height after flip animation
                setTimeout(() => updateContainerHeight(slideIndex), 900); // Match flip-card-inner transition duration
            });
        }

        window.addEventListener('resize', () => {
            updateContainerHeight(slideIndex);
        });

        // Preload images to ensure aspect ratio calculation is accurate
        document.querySelectorAll('.mySlides img').forEach(img => {
            // Check if image is already cached/loaded
            if (!img.complete) {
                img.onload = () => {
                    // If this image is the currently active one, update height
                    if (img.closest('.mySlides').classList.contains('active-slide')) {
                        updateContainerHeight(slideIndex);
                    }
                };
            }
        });
    </script>

</body>
</html>